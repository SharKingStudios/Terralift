ekf_filter_node:
  ros__parameters:
    frequency: 50.0
    sensor_timeout: 0.1
    two_d_mode: true

    map_frame: map
    odom_frame: odom
    base_link_frame: base_link
    world_frame: odom

    publish_tf: true
    publish_acceleration: false

    # IMU INPUT
    imu0: /imu/data

    # imu0_config is a 15-element vector:
    # [x, y, z,
    #  roll, pitch, yaw,
    #  vx, vy, vz,
    #  vroll, vpitch, vyaw,
    #  ax, ay, az]
    #
    # For a 2D robot, fuse yaw and yaw rate.
    # (Roll/pitch can be fused too if you want leveling, but not needed for nav.)
    imu0_config: [
      false, false, false,
      true,  true,  true,
      false, false, false,
      false, false, true,
      false, false, false
    ]


    imu0_differential: false
    imu0_relative: false
    imu0_queue_size: 10
    imu0_remove_gravitational_acceleration: true

    # =========================
    # Filter tuning
    # =========================
    # Start conservative. You can tighten once stable.
    process_noise_covariance: [
      0.05, 0.0,  0.0,  0.0,  0.0,  0.0,
      0.0,  0.05, 0.0,  0.0,  0.0,  0.0,
      0.0,  0.0,  0.05, 0.0,  0.0,  0.0,
      0.0,  0.0,  0.0,  0.02, 0.0,  0.0,
      0.0,  0.0,  0.0,  0.0,  0.02, 0.0,
      0.0,  0.0,  0.0,  0.0,  0.0,  0.03
    ]
